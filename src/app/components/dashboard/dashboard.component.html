<ng-template #filesList let-files="files" let-cardClass="cardClass" let-headerClass="headerClass" let-titulo="titulo">

    <div [class]="cardClass">
        <div [class]="headerClass">
            <app-filemodal [listado]="files" [titulo]="titulo"></app-filemodal>
            {{titulo}}
        </div>

        <div class="card-body">

            <div *ngIf="!files || !files.length">
                <p class="card-text">No hay documentos que mostrar</p>
            </div>
            <div class="table-responsive" *ngIf="files&&files.length">

                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Ubicacion</th>
                            <th scope="col">Modificado</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="files.length>5">
                        <tr>
                            <th scope="row">1</th>
                            <td>{{files[0].name}}</td>
                            <td> <a [href]="files[0].webViewLink" target="_blank">Ver</a> </td>
                            <td>{{files[0].time.getDate()}}-{{files[0].time.getMonth()+1}}-{{files[0].time.getFullYear()}}</td>
                        </tr>
                        <tr>
                            <th scope="row">2</th>
                            <td>{{files[1].name}}</td>
                            <td> <a [href]="files[1].webViewLink" target="_blank">Ver</a> </td>
                            <td>{{files[1].time.getDate()}}-{{files[1].time.getMonth()+1}}-{{files[1].time.getFullYear()}}</td>
                        </tr>
                        <tr>
                            <th scope="row">3</th>
                            <td>{{files[2].name}}</td>
                            <td> <a [href]="files[2].webViewLink" target="_blank">Ver</a> </td>
                            <td>{{files[2].time.getDate()}}-{{files[2].time.getMonth()+1}}-{{files[2].time.getFullYear()}}</td>
                        </tr>
                        <tr>
                            <th scope="row">4</th>
                            <td>{{files[3].name}}</td>
                            <td> <a [href]="files[3].webViewLink" target="_blank">Ver</a> </td>
                            <td>{{files[3].time.getDate()}}-{{files[3].time.getMonth()+1}}-{{files[3].time.getFullYear()}}</td>
                        </tr>
                        <tr>
                            <th scope="row">5</th>
                            <td>{{files[4].name}}</td>
                            <td> <a [href]="files[4].webViewLink" target="_blank">Ver</a> </td>
                            <td>{{files[4].time.getDate()}}-{{files[4].time.getMonth()+1}}-{{files[4].time.getFullYear()}}</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="files.length <= 5">
                        <tr *ngFor="let file of files; let i = index;">
                            <th scope="row">{{i+1}}</th>
                            <td>{{file.name}}</td>
                            <td> <a [href]="file.webViewLink" target="_blank">Ver</a> </td>
                            <td>{{file.time.getDate()}}-{{file.time.getMonth()+1}}-{{file.time.getFullYear()}}</td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>

    </div>
</ng-template>

<div class="row spacing-1">
    <div class="col-12 col-sm-6 col-md-3">

        <div class="card text-center border-info bg-light">
            <a href="https://docs.google.com/documents/" target="_blank"><img class="card-img-top link" src="../../../assets/img/docs.png" alt="Card image cap"></a>
            <div class="card-body">
                <p>Documentos</p>
            </div>
            <div class="card-footer border-info text-muted">
                <h2>{{numeroDocumentos}}</h2>
            </div>
        </div>

    </div>
    <div class="col-12 col-sm-6 col-md-3">

        <div class="card text-center border-success bg-light">
            <a href="https://docs.google.com/spreadsheets/"><img class="card-img-top link" src="../../../assets/img/spreadsheets.png" alt="Card image cap"></a>
            <div class="card-body">
                <p>Hojas de Cálculo</p>
            </div>
            <div class="card-footer border-success text-muted">
                <h2>{{numeroSpreadsheets}}</h2>
            </div>
        </div>

    </div>
    <div class="col-12 col-sm-6 col-md-3">

        <div class="card text-center border-warning bg-light">
            <a href="https://docs.google.com/presentation/" target="_blank"><img class="card-img-top link" src="../../../assets/img/slides.png" alt="Card image cap"></a>
            <div class="card-body">
                <p>Presentaciones</p>
            </div>
            <div class="card-footer border-warning text-muted">
                <h2>{{numeroPresentaciones}}</h2>
            </div>
        </div>

    </div>
    <div class="col-12 col-sm-6 col-md-3">

        <div class="card text-center border-danger bg-light">
            <a href="https://drive.google.com/" target="_blank"><img class="card-img-top link" src="../../../assets/img/drawings.png" alt="Card image cap"></a>
            <div class="card-body">
                <p>Drawings</p>
            </div>
            <div class="card-footer border-danger text-muted">
                <h2>{{numeroDrawings}}</h2>
            </div>
        </div>

    </div>
</div>

<div class="row spacing-1">

    <div class="col-12 col-md-4 spacing-2">

        <div class="card text-center border-success bg-transparent">
            <div class="card-header">
                Almacenamiento total
            </div>
            <div class="card-body">
                <canvas id="storageChartCanvas" width="200" height="200">{{ totalStorageChart }}</canvas>
            </div>
            <div class="card-footer text-muted">
                <p> {{storageUsage}} / {{storageLimit}} GB </p>
            </div>

        </div>

    </div>

    <div class="col-12 col-md-4 spacing-2">

        <div class="card text-center border-info bg-light">
            <div class="card-header">
                Almacenamiento en Drive
            </div>
            <div class="card-body">
                <canvas id="driveChartCanvas" width="200" height="200">{{ driveStorageChart }}</canvas>
            </div>
            <div class="card-footer text-muted">
                <p> {{storageUsageDrive}} / {{storageLimit}} GB </p>
            </div>

        </div>

    </div>

    <div class="col-12 col-md-4 spacing-2">

        <div class="card text-center border-info bg-light">
            <div class="card-header">
                Almacenamiento en Papelera
            </div>
            <div class="card-body">
                <canvas id="trashChartCanvas" width="200" height="200">{{ trashStorageChart }}</canvas>
            </div>
            <div class="card-footer text-muted">
                <p> {{storageUsageTrash}} / {{storageLimit}} GB </p>

            </div>

        </div>

    </div>

</div>

<div class="row spacing-1">

    <div class="col-12 col-md-4 spacing-2">

        <div class="card text-white bg-info mb-3">
            <div class="card-header">
                Límites de tamaño de archivos
            </div>
            <div class="card-body">

                <p> <strong>Subidas: </strong> {{maxUploadSize}} TB</p>
                <p> <strong>Documentos importados: </strong> {{maxImportSizes.document}} MB</p>
                <p> <strong>Presentaciones importadas: </strong> {{maxImportSizes.presentation}} MB</p>
                <p> <strong>Hojas de Cálculo importadas: </strong> {{maxImportSizes.spreadsheet}} MB</p>
                <p> <strong>Drawings importados: </strong> {{maxImportSizes.draw}} MB</p>

            </div>

        </div>

    </div>

    <div class="col-12 col-md-8 spacing-2">

        <div class="card border-warning bg-transparent">
            <div class="card-body">

                <ngb-tabset>
                    <ngb-tab title="Cambios recientes en archivos">
                        <ng-template ngbTabContent>

                            <div *ngIf="!fileChanges || !fileChanges.length">
                                <p class="card-text">No hay cambios en archivos que mostrar</p>
                            </div>
                            <div class="table-responsive" *ngIf="fileChanges&&fileChanges.length">

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Nombre</th>
                                            <th scope="col">Ubicacion</th>
                                            <th scope="col">Modificado</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let file of fileChanges; let i = index;">
                                            <th scope="row">{{i+1}}</th>
                                            <td>{{file.name}}</td>
                                            <td> <a [href]="file.webViewLink" target="_blank">Ver</a> </td>
                                            <td>{{file.time.getDate()}}-{{file.time.getMonth()+1}}-{{file.time.getFullYear()}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>

            </div>

        </div>

    </div>

</div>

<div class="row spacing-1">

    <div class="col-12 col-lg-6 spacing-2">

        <ng-container
        [ngTemplateOutlet]="filesList"
        [ngTemplateOutletContext]="{
            files: docFiles,
            cardClass: 'card border-primary bg-light mb-3',
            headerClass: 'card-header bg-primary text-white',
            titulo: 'Documentos'
        }"></ng-container>
    </div>

    <div class="col-12 col-lg-6 spacing-2">

        <ng-container
        [ngTemplateOutlet]="filesList"
        [ngTemplateOutletContext]="{
            files: presentationFiles,
            cardClass: 'card border-warning bg-light mb-3',
            headerClass: 'card-header bg-warning text-white',
            titulo: 'Presentaciones'
        }"></ng-container>
    </div>

</div>

<div class="row spacing-1">

    <div class="col-12 col-lg-6 spacing-2">
        <ng-container
        [ngTemplateOutlet]="filesList"
        [ngTemplateOutletContext]="{
            files: spreadFiles,
            cardClass: 'card border-success bg-light mb-3',
            headerClass: 'card-header bg-success text-white',
            titulo: 'Hojas de Cálculo'
        }"></ng-container>
    </div>

    <div class="col-12 col-lg-6 spacing-2">
        <ng-container
        [ngTemplateOutlet]="filesList"
        [ngTemplateOutletContext]="{
            files: drawingFiles,
            cardClass: 'card border-danger bg-light mb-3',
            headerClass: 'card-header bg-danger text-white',
            titulo: 'Drawings'
        }"></ng-container>
    </div>

</div>


<div class="sidenav" id="mySidenav">

    <div class="card bg-light">

        <div class="card-header">
            <i class="fa fa-user-circle-o" style="font-size:24px"></i> Usuario
        </div>

        <div class="card-body">
            <p class="card-text"><i class="fa fa-address-card-o" style="font-size:24px"></i> Nombre:</p>
            <p>{{username}}</p>
            <p class="card-text"><i class="fa fa-envelope-open-o" style="font-size:24px"></i> E-mail:</p>
            <p> {{usermail}} </p>
        </div>

        <div class="card-footer text-muted">
            <button type="button" class="btn btn-outline-danger" (click)="signOut()"><i class="fa fa-sign-out" style="font-size:24px"></i>Salir</button>
        </div>

    </div>

</div>

<div *ngIf="loadingCenter || sidenavOpen" class="dash-backdrop" (click)="handleCurtain()"></div>

<i *ngIf="loadingCenter" class="fa fa-spinner fa-spin" style="font-size:48px"></i>

<div *ngIf="loadingCorner && !loadingCenter" class="loadingCorner">
    <i class="fa fa-spinner fa-spin" style="font-size:48px"></i>
</div>

<div class="floating-special" (click)="toggleMenu()">
    <img [src]="userpic" class="profilePic">
</div>